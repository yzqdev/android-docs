"use strict";(self.webpackChunkandroid_docs=self.webpackChunkandroid_docs||[]).push([[2717],{2655:(n,s,a)=>{a.r(s),a.d(s,{data:()=>t});const t=JSON.parse('{"key":"v-8767d0ec","path":"/dart/dart-package.html","title":"dart基础","lang":"zh-CN","frontmatter":{},"headers":[{"level":2,"title":"版本管理","slug":"版本管理","link":"#版本管理","children":[]},{"level":2,"title":"编译为exe","slug":"编译为exe","link":"#编译为exe","children":[]},{"level":2,"title":"获取文件的md5","slug":"获取文件的md5","link":"#获取文件的md5","children":[]}],"git":{"createdTime":1659917471000,"updatedTime":1659917471000,"contributors":[{"name":"yzqdev","email":"yzqdev@outlook.com","commits":1}]},"readingTime":{"minutes":1.14,"words":341},"filePathRelative":"dart/dart-package.md","localizedDate":"2022年8月8日","excerpt":""}')},4768:(n,s,a)=>{a.r(s),a.d(s,{default:()=>r});var t=a(6252);const e=(0,t._)("h1",{id:"dart基础",tabindex:"-1"},[(0,t._)("a",{class:"header-anchor",href:"#dart基础","aria-hidden":"true"},"#"),(0,t.Uk)(" dart基础")],-1),p=(0,t._)("h2",{id:"版本管理",tabindex:"-1"},[(0,t._)("a",{class:"header-anchor",href:"#版本管理","aria-hidden":"true"},"#"),(0,t.Uk)(" 版本管理")],-1),c={href:"https://dart.dev/tools/pub/versioning",target:"_blank",rel:"noopener noreferrer"},o=(0,t.uE)('<p>配置环境变量</p><p>flutter默认的cache在<code>D:\\flutter\\.pub-cache</code> dart默认的cache在<code>%LOCALAPPDATA%\\Pub\\Cache</code> 所以要想让dart使用flutter的cache路径,需要设置环境变量<code>PUB_CACHE</code></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>PUB_CACHE\n这个变量决定了 pub get 下载的依赖包存在到的位置，默认一般在当前用户的目录下面，可以通过环境变量修改默认位置.\n\nPUB_HOSTED_URL\n这个变量了指定 pub get 从哪里下载依赖包的资源，默认为 pub.dev，但国内经常出现无法访问的情况，因此可以通过设置环境变量指定镜像地址。\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>比如我设置的<code>PUB_CACHE</code>就是<code>D:\\flutter\\.pub-cache</code>,这样下载依赖就不会下载到<code>%LOCALAPPDATA%\\Pub\\Cache</code>去了</p><h2 id="编译为exe" tabindex="-1"><a class="header-anchor" href="#编译为exe" aria-hidden="true">#</a> 编译为exe</h2>',5),i={href:"https://dart.dev/tools/dart-compile",target:"_blank",rel:"noopener noreferrer"},l=(0,t.uE)('<p>例子</p><h2 id="获取文件的md5" tabindex="-1"><a class="header-anchor" href="#获取文件的md5" aria-hidden="true">#</a> 获取文件的md5</h2><p>js</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;path&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;fs&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">const</span> crypto <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;crypto&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">const</span> buffer <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#39;app.apk&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">const</span> hash <span class="token operator">=</span> crypto<span class="token punctuation">.</span><span class="token function">createHash</span><span class="token punctuation">(</span><span class="token string">&#39;md5&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\nhash<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>buffer<span class="token punctuation">,</span> <span class="token string">&#39;utf8&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">const</span> md5 <span class="token operator">=</span> hash<span class="token punctuation">.</span><span class="token function">digest</span><span class="token punctuation">(</span><span class="token string">&#39;hex&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\nconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>md5<span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>dart</p><div class="language-powershell line-numbers-mode" data-ext="powershell"><pre class="language-powershell"><code><span class="token comment"># 运行</span>\ndart run bin\\md5<span class="token punctuation">.</span>dart\n<span class="token comment"># 编译exe</span>\ndart compile exe bin\\md5<span class="token punctuation">.</span>dart\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-dart line-numbers-mode" data-ext="dart"><pre class="language-dart"><code><span class="token keyword">import</span> <span class="token string-literal"><span class="token string">&#39;dart:io&#39;</span></span><span class="token punctuation">;</span>\n<span class="token keyword">import</span> <span class="token string-literal"><span class="token string">&#39;package:crypto/crypto.dart&#39;</span></span> <span class="token operator">as</span> crypto<span class="token punctuation">;</span>\n<span class="token keyword">import</span> <span class="token string-literal"><span class="token string">&#39;dart:typed_data&#39;</span></span><span class="token punctuation">;</span>\n\nbool <span class="token function">isPhone</span><span class="token punctuation">(</span><span class="token class-name">String</span> input<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token class-name">RegExp</span> pathReg <span class="token operator">=</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">r&quot;\\.\\\\&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token keyword">return</span> pathReg<span class="token punctuation">.</span><span class="token function">hasMatch</span><span class="token punctuation">(</span>input<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> arguments<span class="token punctuation">)</span> <span class="token keyword">async</span> <span class="token punctuation">{</span>\n\n  <span class="token keyword">var</span> filePath <span class="token operator">=</span> arguments<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token punctuation">;</span>\n  <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">isPhone</span><span class="token punctuation">(</span>filePath<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>\n    filePath<span class="token operator">=</span>arguments<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token punctuation">}</span>\n  <span class="token function">print</span><span class="token punctuation">(</span>filePath<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token class-name">File</span> file <span class="token operator">=</span> <span class="token class-name">File</span><span class="token punctuation">(</span>filePath<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token keyword">try</span> <span class="token punctuation">{</span>\n    <span class="token keyword">final</span> fileStream <span class="token operator">=</span> file<span class="token punctuation">.</span><span class="token function">openRead</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">var</span> md5 <span class="token operator">=</span> crypto<span class="token punctuation">.</span>md5<span class="token punctuation">;</span>\n    <span class="token keyword">final</span> checksum <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">await</span> md5<span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>fileStream<span class="token punctuation">)</span><span class="token punctuation">.</span>first<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token function">print</span><span class="token punctuation">(</span>checksum<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token function">print</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;找不到文件&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>',7),u={},r=(0,a(3744).Z)(u,[["render",function(n,s){const a=(0,t.up)("ExternalLinkIcon");return(0,t.wg)(),(0,t.iD)("div",null,[e,p,(0,t._)("p",null,[(0,t._)("a",c,[(0,t.Uk)("官网"),(0,t.Wm)(a)])]),o,(0,t._)("p",null,[(0,t.Uk)("见文档 "),(0,t._)("a",i,[(0,t.Uk)("https://dart.dev/tools/dart-compile"),(0,t.Wm)(a)])]),l])}]])},3744:(n,s)=>{s.Z=(n,s)=>{const a=n.__vccOpts||n;for(const[n,t]of s)a[n]=t;return a}}}]);