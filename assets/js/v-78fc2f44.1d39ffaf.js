"use strict";(self.webpackChunkandroid_docs=self.webpackChunkandroid_docs||[]).push([[3492],{4820:(e,n,a)=>{a.r(n),a.d(n,{data:()=>s});const s=JSON.parse('{"key":"v-78fc2f44","path":"/hybrid/uniapp/build-apps.html","title":"打包注意事项","lang":"zh-CN","frontmatter":{},"headers":[{"level":2,"title":"教程","slug":"教程","link":"#教程","children":[]},{"level":2,"title":"生成签名证书","slug":"生成签名证书","link":"#生成签名证书","children":[{"level":3,"title":"查看证书信息","slug":"查看证书信息","link":"#查看证书信息","children":[]},{"level":3,"title":"使用android studio生成证书","slug":"使用android-studio生成证书","link":"#使用android-studio生成证书","children":[]}]},{"level":2,"title":"分离abi(分开64位和32位)","slug":"分离abi-分开64位和32位","link":"#分离abi-分开64位和32位","children":[]},{"level":2,"title":"常见问题","slug":"常见问题","link":"#常见问题","children":[]}],"git":{"createdTime":1674222943000,"updatedTime":1674222943000,"contributors":[{"name":"yzqdev","email":"yzqdev@outlook.com","commits":1}]},"readingTime":{"minutes":1.85,"words":554},"filePathRelative":"hybrid/uniapp/build-apps.md","localizedDate":"2023年1月20日","excerpt":""}')},9898:(e,n,a)=>{a.r(n),a.d(n,{default:()=>u});var s=a(6252);const i=(0,s._)("h1",{id:"打包注意事项",tabindex:"-1"},[(0,s._)("a",{class:"header-anchor",href:"#打包注意事项","aria-hidden":"true"},"#"),(0,s.Uk)(" 打包注意事项")],-1),l=(0,s._)("h2",{id:"教程",tabindex:"-1"},[(0,s._)("a",{class:"header-anchor",href:"#教程","aria-hidden":"true"},"#"),(0,s.Uk)(" 教程")],-1),t={href:"https://nativesupport.dcloud.net.cn/AppDocs/usesdk/android",target:"_blank",rel:"noopener noreferrer"},r={href:"https://nativesupport.dcloud.net.cn/AppDocs/usesdk/appkey",target:"_blank",rel:"noopener noreferrer"},d=(0,s.uE)('<h2 id="生成签名证书" tabindex="-1"><a class="header-anchor" href="#生成签名证书" aria-hidden="true">#</a> 生成签名证书</h2><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>keytool <span class="token parameter variable">-genkey</span> <span class="token parameter variable">-alias</span> testalias <span class="token parameter variable">-keyalg</span> RSA <span class="token parameter variable">-keysize</span> <span class="token number">2048</span> <span class="token parameter variable">-validity</span> <span class="token number">36500</span> <span class="token parameter variable">-keystore</span> test.keystore\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>其中:</p><ul><li>testalias是证书别名，可修改为自己想设置的字符，建议使用英文字母和数字</li><li>test.keystore是证书文件名称，可修改为自己想设置的文件名称，也可以指定完整文件路径</li><li>36500是证书的有效期，表示100年有效期，单位天，建议时间设置长一点，避免证书过期</li></ul><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>Enter keystore password:  //输入证书文件密码，输入完成回车  \nRe-enter new password:   //再次输入证书文件密码，输入完成回车  \nWhat is your first and last name?  \n  [Unknown]:  //输入名字和姓氏，输入完成回车  \nWhat is the name of your organizational unit?  \n  [Unknown]:  //输入组织单位名称，输入完成回车  \nWhat is the name of your organization?  \n  [Unknown]:  //输入组织名称，输入完成回车  \nWhat is the name of your City or Locality?  \n  [Unknown]:  //输入城市或区域名称，输入完成回车  \nWhat is the name of your State or Province?  \n  [Unknown]:  //输入省/市/自治区名称，输入完成回车  \nWhat is the two-letter country code for this unit?  \n  [Unknown]:  //输入国家/地区代号（两个字母），中国为CN，输入完成回车  \nIs CN=XX, OU=XX, O=XX, L=XX, ST=XX, C=XX correct?  \n  [no]:  //确认上面输入的内容是否正确，输入y，回车  \n\nEnter key password for &lt;testalias&gt;  \n        (RETURN if same as keystore password):  //确认证书密码与证书文件密码一样（HBuilder|HBuilderX要求这两个密码一致），直接回车就可以\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="查看证书信息" tabindex="-1"><a class="header-anchor" href="#查看证书信息" aria-hidden="true">#</a> 查看证书信息</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>keytool <span class="token parameter variable">-list</span> <span class="token parameter variable">-v</span> <span class="token parameter variable">-keystore</span> test.keystore  \n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="使用android-studio生成证书" tabindex="-1"><a class="header-anchor" href="#使用android-studio生成证书" aria-hidden="true">#</a> 使用android studio生成证书</h3><p>菜单栏-&gt;build-&gt;generate signed apk 生成一个jks证书</p><h2 id="分离abi-分开64位和32位" tabindex="-1"><a class="header-anchor" href="#分离abi-分开64位和32位" aria-hidden="true">#</a> 分离abi(分开64位和32位)</h2><p>在build.gradle添加</p><div class="language-groovy line-numbers-mode" data-ext="groovy"><pre class="language-groovy"><code>\n defaultConfig<span class="token punctuation">{</span>\n\n     splits <span class="token punctuation">{</span>\n         abi <span class="token punctuation">{</span>\n             enable <span class="token boolean">true</span>\n             \n    <span class="token comment">// 排除不必要的架构</span>\n exclude <span class="token string">&#39;x86&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;arm64-v8a&#39;</span>\n  <span class="token comment">// 重置包含的目录</span>\n <span class="token function">reset</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n  <span class="token comment">// 设置包含，调用前需要先用 reset 将默认清除</span>\n include <span class="token string">&#39;armeabi-v7a&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;x86&#39;</span>\n \n <span class="token comment">// 是否打出包含全部的apk</span>\n universalApk <span class="token boolean">true</span>\n         <span class="token punctuation">}</span>\n     <span class="token punctuation">}</span>\n <span class="token punctuation">}</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="常见问题" tabindex="-1"><a class="header-anchor" href="#常见问题" aria-hidden="true">#</a> 常见问题</h2>',13),o={href:"https://ask.dcloud.net.cn/article/35627",target:"_blank",rel:"noopener noreferrer"},c={},u=(0,a(3744).Z)(c,[["render",function(e,n){const a=(0,s.up)("ExternalLinkIcon");return(0,s.wg)(),(0,s.iD)("div",null,[i,l,(0,s._)("ul",null,[(0,s._)("li",null,[(0,s.Uk)("安卓离线打包教程 "),(0,s._)("a",t,[(0,s.Uk)("https://nativesupport.dcloud.net.cn/AppDocs/usesdk/android"),(0,s.Wm)(a)])]),(0,s._)("li",null,[(0,s.Uk)("关于appkey的问题 "),(0,s._)("a",r,[(0,s.Uk)("https://nativesupport.dcloud.net.cn/AppDocs/usesdk/appkey"),(0,s.Wm)(a)])])]),d,(0,s._)("ul",null,[(0,s._)("li",null,[(0,s.Uk)("uni-app运行环境版本和编译器版本不一致的问题"),(0,s._)("a",o,[(0,s.Uk)("https://ask.dcloud.net.cn/article/35627"),(0,s.Wm)(a)])])])])}]])},3744:(e,n)=>{n.Z=(e,n)=>{const a=e.__vccOpts||e;for(const[e,s]of n)a[e]=s;return a}}}]);